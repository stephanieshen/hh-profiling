<div class="profiling-dialog">
    <p-steps
        [model]="stepItems"
        [readonly]="false"
        [activeIndex]="activeIndex"
        (activeIndexChange)="onActiveIndexChange($event)"
    />

    <div class="m-6">

        <form [formGroup]="profilingForm" (ngSubmit)="submitProfilingForm()">
            @if (activeIndex === 0) {
                <app-household-info-form
                    [householdInfoForm]="houseHoldInfoFormGroup"
                ></app-household-info-form>
            }
        
            @if (activeIndex === 1) {
                <app-socio-and-env-form
                    [socioEnvForm]="socioEconomicAndEnvDataFormGroup"
                ></app-socio-and-env-form>
            }

            @if (activeIndex === 2) {
                <app-household-members-form
                    [profilingForm]="profilingForm"
                    (addedMemberEvent)="addHouseholdMemberHandler()"
                    (removedMemberEvent)="removeHouseholdMemberHandler($event)"
                ></app-household-members-form>
            }

            @if (activeIndex === 3) {
                <app-survey-details-form
                    [surveyDetailsForm]="surveyDetailsFormGroup"
                ></app-survey-details-form>
            }

            <div class="flex align-items-center justify-content-end gap-2 mt-4">
                <p-button
                    *ngIf="activeIndex > 0"
                    label="Back"
                    icon="pi pi-angle-left"
                    size="large"
                    severity="secondary"
                    [outlined]="true"
                    (click)="back()"
                />
                <p-button
                    *ngIf="activeIndex < stepItems.length - 1"
                    label="Next"
                    size="large"
                    icon="pi pi-angle-right"
                    (click)="next()"
                />
                <p-button
                    *ngIf="activeIndex === stepItems.length - 1"
                    label="Submit"
                    size="large"
                    icon="pi pi-angle-right"
                    type="submit"
                />
            </div>
        </form>
    </div>

</div>

